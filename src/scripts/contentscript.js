!function(e){var n=function(e){console.error(e)},o=function(e){return e.json()},c=function(e,o,c){var a,r="@["+o+":] https://fb.com/"+o;switch(c){case"remove":a="💀 "+r+" đã bị xóa khỏi nhóm 🧟‍♀";break;case"block":a="☠ "+r+" đã bị chặn khỏi nhóm 🧟‍♂";break;case"unblock":a="😉 "+r+" đã được bỏ chặn khỏi nhóm 🤗";break;default:a="Không có hành động nào để thực hiện 💥"}t().then(function(o){var c="https://graph.facebook.com/v2.11/"+e+"/comments?access_token="+o,t=new FormData;t.append("message",a);fetch(c,{method:"POST",body:t}).catch(n)}).catch(n)},t=function(){var c=function(n,o){var c=new FormData,t=document.querySelector('[name="fb_dtsg"]');t||o(),c.append("fb_dtsg",t.value),c.append("app_id","165907476854626"),c.append("redirect_uri","fbconnect://success"),c.append("display","page"),c.append("return_format","access_token"),fetch("https://www.facebook.com/v2.8/dialog/oauth/confirm",{method:"POST",credentials:"include",body:c}).then(function(e){return e.text()}).then(function(c){if(c&&c.includes("access_token="))try{var t=c.match(/access_token=([^&]+)/)[1];e.storage.local.set({c_token:t}),n(t)}catch(e){o()}else o()})};return new Promise(function(t,a){e.storage.local.get({c_token:""},function(e){if(e.c_token){var r=e.c_token;fetch("https://graph.facebook.com/v2.11/me?access_token="+r).then(o).then(function(e){e&&e.id?t(r):c(t,a)},function(){c(t,a)}).catch(n)}else c(t,a)})})};e.runtime.onMessage.addListener(function(o){var t=o.cmd.toLowerCase(),a=o.g,r=o.l,s=o.u;if(!a)return void console.log("no group");var i=document.querySelector('[name="fb_dtsg"]');if(("block"===t||"remove"===t||"unblock"===t)&&null!==i){var d=new FormData;d.append("fb_dtsg",i.value),d.append("__user",o.cu),d.append("__a",1),"block"===t&&d.append("block_user",1);var u="https://www.facebook.com/ajax/groups/remove_member/?group_id="+a+"&member_id="+s+"&source=profile_browser&is_undo=0&dpr=1";"unblock"===t?(d.append("remove_block",1),u="https://www.facebook.com/ajax/groups/admin_post/?group_id="+a+"&user_id="+s+"&source=profilebrowser_blocked&operation=confirm_remove_block&dpr=1"):d.append("confirmed","true"),fetch(u,{method:"POST",credentials:"include",body:d}).then(function(){e.runtime.sendMessage({cmd:"GM.admin",user_id:s,type:t}),c(r,s,t)}).catch(n)}}),e.runtime.sendMessage({cmd:"GM.admin.active"})}(chrome);