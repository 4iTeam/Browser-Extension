!function(e){var n=function(e){console.error(e)},c=function(e){return e.json()},t=function(e,c,t){var a,r="@["+c+":]";switch(t){case"remove":a="💀 "+r+" đã bị xóa khỏi nhóm 🧟‍♀";break;case"block":a="☠ "+r+" đã bị chặn khỏi nhóm 🧟‍♂";break;case"unblock":a="😉 "+r+" đã được bỏ chặn khỏi nhóm 🤗";break;default:a="Không có hành động nào để thực hiện 💥"}o().then(function(c){var t="https://graph.facebook.com/v2.11/"+e+"/comments?access_token="+c,o=new FormData;o.append("message",a);fetch(t,{method:"POST",body:o}).catch(n)}).catch(n)},o=function(){var t=function(n,c){var t=new FormData,o=document.querySelector('[name="fb_dtsg"]');o||c(),t.append("fb_dtsg",o.value),t.append("app_id","165907476854626"),t.append("redirect_uri","fbconnect://success"),t.append("display","page"),t.append("return_format","access_token"),fetch("https://www.facebook.com/v2.8/dialog/oauth/confirm",{method:"POST",credentials:"include",body:t}).then(function(e){return e.text()}).then(function(t){if(t&&t.includes("access_token="))try{var o=t.match(/access_token=([^&]+)/)[1];e.storage.local.set({c_token:o}),n(o)}catch(e){c()}else c()})};return new Promise(function(o,a){e.storage.local.get({c_token:""},function(e){if(e.c_token){var r=e.c_token;fetch("https://graph.facebook.com/v2.11/me?access_token="+r).then(c).then(function(e){e&&e.id?o(r):t(o,a)},function(){t(o,a)}).catch(n)}else t(o,a)})})};e.runtime.onMessage.addListener(function(c){var o=c.cmd.toLowerCase(),a=c.g,r=c.l,s=c.u;if(!a)return void console.log("no group");if("block"===o||"remove"===o||"unblock"===o){var i=document.querySelector('[name="fb_dtsg"]');if(null!==i){var u=new FormData;u.append("fb_dtsg",i.value),u.append("confirm",1),u.append("__user",c.cu),u.append("__a",1),"block"===o&&u.append("ban_user",1);var d="0";"unblock"===o&&(d="1"),fetch("https://www.facebook.com/ajax/groups/members/remove.php?group_id="+a+"&uid="+s+"&is_undo="+d,{method:"POST",credentials:"include",body:u}).then(function(){e.runtime.sendMessage({cmd:"GM.admin",user_id:s,type:o}),t(r,s,o)}).catch(n)}}}),e.runtime.sendMessage({cmd:"GM.admin.active"})}(chrome);